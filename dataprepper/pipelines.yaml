otel-metrics-pipeline:
  workers: 1
  delay: 5000
  source:
    otel_metrics_source:
      ssl: false
      port: 21892
      authentication:
        unauthenticated: {}
  processor:
    - aggregate:
        identification_keys: ["instance_id"]
        action:
          histogram:
            key: "value"
            record_minmax: true
            units: "seconds"
            buckets: [0, 1]
        group_duration: "20s"
        aggregate_when: "true"
  sink:
    - opensearch:
        hosts: ["http://opensearch:9200"]
        index: metrics_index
        username: admin
        password: admin
