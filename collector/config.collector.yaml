extensions:
  oidc:
    issuer_url: http://[::1]:8080/realms/opentelemetry
    audience: collector
    attribute: authorization

receivers:
  otlp/secure:
    protocols:
      grpc:
        auth:
          authenticator: oidc
        tls:
          cert_file: ./server.pem
          key_file: ./server-key.pem

processors:
  batch:

exporters:
  prometheus:
    endpoint: "0.0.0.0:8889"

service:
  extensions: [oidc]
  pipelines:
    metrics:
      receivers: [otlp/secure]
      processors: [batch]
      exporters: [prometheus]
